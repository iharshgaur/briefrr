<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Briefrr ‚Äî Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <div class="header">
      <span class="logo-icon">‚ö°</span>
      <h1>Briefrr Settings</h1>
    </div>

    <!-- API Key Section -->
    <div class="card">
      <h2>Gemini API Key</h2>

      <div class="key-display" id="key-display">
        <span class="key-label">Current key:</span>
        <span class="key-value" id="key-value">Not set</span>
      </div>

      <div class="key-edit" id="key-edit" style="display:none;">
        <div class="input-wrapper">
          <input type="password" id="new-key-input" placeholder="Paste new Gemini API key..." autocomplete="off">
          <button class="toggle-btn" id="toggle-key">üëÅÔ∏è</button>
        </div>
        <div class="btn-row">
          <button class="btn btn-primary" id="btn-save-key">Verify & Save</button>
          <button class="btn btn-ghost" id="btn-cancel-edit">Cancel</button>
        </div>
        <div class="status" id="status-msg"></div>
      </div>

      <div class="btn-row" id="key-actions">
        <button class="btn btn-secondary" id="btn-change-key">Change API Key</button>
        <button class="btn btn-danger-outline" id="btn-clear-key">Clear Key</button>
      </div>

      <a href="https://aistudio.google.com/apikey" target="_blank" rel="noopener" class="link">
        Manage keys on Google AI Studio ‚Üí
      </a>
    </div>

    <!-- About Section -->
    <div class="card card-muted">
      <p class="version">Briefrr v1.0.0</p>
      <p class="powered">Powered by Google Gemini 2.5 Flash-Lite</p>
    </div>
  </div>

  <!-- Confirm dialog -->
  <div class="overlay" id="confirm-overlay" style="display:none;">
    <div class="dialog">
      <h3>Clear API Key?</h3>
      <p>This will remove your saved key. You'll need to enter a new one to use Briefrr.</p>
      <div class="btn-row">
        <button class="btn btn-danger" id="btn-confirm-clear">Clear Key</button>
        <button class="btn btn-ghost" id="btn-cancel-clear">Cancel</button>
      </div>
    </div>
  </div>

  <script src="utils/storage.js"></script>
  <script src="utils/gemini-api.js"></script>
  <script src="options.js"></script>
</body>
</html>
